LONG-BONE FRACTURE DETECTION USING ARTIFICIAL NEURAL NETWORKS BASED ON LINE FEATURES OF X-RAY IMAGES
A PREPRINT

Alice Yi Yang  
School of Electrical and Information Engineering  
University of the Witwatersrand  
Johannesburg, South Africa, 2000  
yangalic8@gmail.com

Ling Cheng  
School of Electrical and Information Engineering  
University of the Witwatersrand  
Johannesburg, South Africa, 2000  
ling.cheng@wits.ac.za

February 21, 2019

ABSTRACT

Two line-based fracture detection scheme are developed and discussed, namely Standard line-based fracture detection and Adaptive Differential Parameter Optimized (ADPO) line-based fracture detection. The purpose for the two line-based fracture detection schemes is to detect fractured lines from X-ray images using extracted features based on recognised patterns to differentiate fractured lines from non-fractured lines. The difference between the two schemes is the detection of detailed lines. The ADPO scheme optimizes the parameters of the Probabilistic Hough Transform, such that granule lines within the fractured regions are detected, whereas the Standard scheme is unable to detect them. The lines are detected using the Probabilistic Hough Function, in which the detected lines are a representation of the image edge objects. The lines are given in the form of points, (x, y), which includes the starting and ending point. Based on the given line points, 13 features are extracted from each line, as a summary of line information. These features are used for fractured and non-fracture classification of the detected lines. The classification is carried out by the Artificial Neural Network (ANN). There are two evaluations that are employed to evaluate both the entirety of the system and the ANN. The Standard Scheme is capable of achieving an average accuracy of 74.25%, whilst the ADPO scheme achieved an average accuracy of 74.4%. The ADPO scheme is opted for over the Standard scheme, however it can be further improved with detected contours and its extracted features.

Keywords

Artificial Neural Network · Automated Diagnosis · X-ray Images · Line-based Feature Extraction · Image Processing

1 Introduction

The application of Computer Aided Diagnosis (CAD) in the medical field has been introduced since the early 1970s [1, 2], in which the first CAD system utilised a decision tree analysis. Since the early 1970s, CAD systems have developed further and some even employ the use of Artificial Neural Networks (ANN). Siam, M Et al. [3] proposed an adaptive interface agent (AdAgen) for X-ray fracture detection. The interface AdAgen uses neural network to collaborate with trained agents. The neural network is used to build the software interface agent for the detection of fractures in long bones. A semi-intelligent system is provided by the software agent. The results obtained from the simulations indicates that the incorporated agents assists with the performance of the automated fracture detection in leg radiography. The general approach to classifying the presence of bone fracture involves mapping the data to one of several predefined classes. However, there are challenges presented in the classification techniques, which are due to information overload, size and dimension of the data [4]. A classification technique is defined as a systematic approach of processing input data by constructing classification models. Examples of classification techniques includes Decision


Tree Classifiers, Rule-Based Classifiers, Neural Networks, Support Vector Machines and Naïve Bayes Classifiers. The authors of [5], proposes a four-step system that makes use of fusion-classification techniques to automate the detection of bone fracture specifically for leg bones (tibia). The four-steps includes preprocessing, segmentation, feature extraction and bone detection. The three classifiers during the fusion classification are Back-Propagation Neural Network (BPNN), Support Vector Machine (SVM) and Naïve Bayes Classifiers (NB). Through experimentation, the authors stated that the proposed four-step system showed significant improvement in terms of detection rate and speed of classification. An alternative classifier is the Convolutional Neural Network (CNN) which is a supervised classifier. Dojcenik A. Et al. [6] proposed a hybrid system with a CNN and Wavelet Transform-Singular Value Decomposition (DWT-SVD) for the classification of malignant and benign masses from liver CT images. The authors intension for the hybrid system is to reduce the execution time of the CNN architecture. The features for the classification are extracted using Perceptual hash functions. The hybrid system was evaluated using 200 images, in which 100 images are of benign tumours and the other 100 are of malignant tumours. The system achieved an accuracy of 97.3%. Features are crucial for the classification of various categories. The authors of [7] developed a model based on Deep Convolutional Neural Network (DCNN) for feature extractions. The features are extracted from X-ray images for the classification of weld flaw types. The model uses a technique called Sparse Autoencoder (SAE) as well as the mapping of the CNN layers for feature extraction. This extracted features are compared to the features from the traditional Grey Level Co-occurrence Matrix (GLCM) technique. The results obtained by the authors indicate that the extracted features based on the DCNN is better than traditional features, as it obtained a 97.2% accuracy whereas the accuracy obtained by the traditional methods obtained an 82.2% accuracy. The processing of images are essential as it ensures that all images are consistent to obtain the best results when passed through the system. In [8] the proposed system employs fuzzy network, multilevel threshold and morphological methods for the removal of noise and enhance the contrast of the CT images. The fuzzy network proved to balance the noise reduction and enhancement in the results, whilst the multilevel Otsu’s threshold filled in the missing gaps found within the images.

This paper describes a novel Adaptive Differential Parameter Optimization (ADPO) line-based fracture detection scheme. The purpose of the line-based fracture detection scheme is to offer a second opinion to medical physicians by classifying fractured and non-fractured lines present in the X-ray images. The proposed novel technique is intended to classify fractured lines from non-fractured lines, by training the Artificial Neural Network (ANN) with lines rather than the entire image. The proposed line-based fracture detection eliminates the need to train the ANN with entire images in order to understand the ADPO approach for line-based fracture detection, the Standard line-based fracture detection is detailed in Section 2.1. The Standard line-based fracture detection procedure extracts line features from the canny generated image using the Probabilistic Hough Transform. A total of 13 features are extracted from each detected line within the image. The features are detailed in Section 2, which includes distance, gradient, and the starting and ending points of the line. The features are labelled as either fractured or non-fractured using a graphical user interface (GUI). The labelled features are used to both train and test the ANN. The architecture of the ANN is described in Section 2.7, in which it consists of four layers, an output and input layer and two hidden layers. PCA is performed on the line features to determine the dominant contributing features that differentiates a fractured line from a non-fractured line. The results of the analysis indicates that the distance in the horizontal direction holds dominance for fractured lines, whilst the distance in the vertical direction holds dominance for non-fractured lines. Further PCA results are detailed in Section 2.6. The line classification of the ANN is detailed in Section 3, which includes two different experimental set-ups. The first is line-based with image context, in which it evaluates the overall system and the second is line-based without any image context. The second experimental set-up evaluates the performance of the ANN.

Since the Standard line-based fracture detection approach does not detail all the granule lines found within the fractured area of the X-ray image, a novel ADPO scheme is proposed. This scheme optimizes the parameters of the Probabilistic Hough Transform, such that all detailed lines are detected for further data processing. There are three parameters that are optimized, namely the threshold, minimum line length, and maximum line gap parameters. The optimization and selected values for the three parameters are detailed in Section 4. The follow-up procedures of the ADPO is similar to the approach of the Standard line-based fracture detection, however the difference is the data that is given to the ANN. Only lines that fall within the leg-bone region of the leg are used to train the ANN, all other lines are disregarded as the lines are classified as knee, foot or flesh. The filtering technique of the bone from flesh lines in the leg area is described in Section 4.2. The performance of the ADPO line-based fracture detection system is detailed in Section 4.3, whereby it uses the same experimental set-up as the Standard scheme.

2 Methodology

2.1 Standard Line-Based Fracture Detection

The Standard line-based fracture detection follows the procedure in which it first extracts lines from the canny processed image. This is followed by the extraction of 13 features from each line. The features are used to train and test the


A PREPRINT - FEBRUARY 21, 2019

ANN. Additionally PCA is applied to the features to determine the dominant feature(s) that differentiate fractured and non-fractured lines. The training component of the ANN both sets-up the neural network as well as train it, whilst the execution component is employed for testing the ANN. The results obtained from the evaluation is analysed to assess the ANN’s performance. Figure 1 illustrates a graphical flow of the Standard line-based fracture detection procedure.

![Flowchart](https://via.placeholder.com/600x400?text=Flowchart+Image+Missing)

Figure 1: Flowchart illustrating the procedural flow of the Standard line-based fracture detection

2.2 Image Enhancement

All raw X-ray images are converted to greyscale to simplify the image enhancement process, as greyscale images have a single channel compared to RGB where there are three channels. The image enhancement process consists of the removal of white space, pixel equalisation, gamma correction, denoising and unsharp masking. The purpose of the process is to create a high contrast between the long-bone edges and all other pixels within the image. The high contrast ensures that all the image edges are detected by the Canny edge detection operation. The Canny edge detection operation generates a binary image (black and white) with all the long-bone edges highlighted in the image [9]. The Canny edge detection operation is borrowed from the OpenCV2.4 library. The binary images are employed for the line extraction, which lines are extracted based on the edge image objects detected by the Canny edge detection operation.


A PREPRINT - FEBRUARY 21, 2019

2.3 Line Extraction

The line extraction is performed by utilizing Probabilistic Hough Transform. The Probabilistic Hough Transform is a line detection technique in which lines are detected from contrasted image produced by the Canny edge detection technique [10, 11]. It uses the Polar system in which a line is expressed in the form shown in (1). A line is defined by rearranging (1) to generate (2) for point P(x, y). Therefore, each line that passes through \((x_i, y_i)\) is represented by \((r_\theta, \theta)\).

\[ y = \left(- \frac{\cos \theta}{\sin \theta} \right)x + \left( \frac{r_\theta}{\sin \theta} \right) \tag{1} \]

\[ r_\theta = x \cos \theta + y \sin \theta \tag{2} \]

The \((r_\theta, \theta)\) coordinates are used to detect lines by determining the number of intersections between the curves. An increase in the number of intersections indicates a long line. Therefore, a threshold for the minimum number of intersection is defined for line detection. This is the operation of the Hough Transform, in which it tracks the number of intersections for each \((r_\theta, \theta)\). Detected lines by the Probabilistic Hough Transform are represented in the form of \((x_1, y_1; x_2, y_2)\). The chosen parameter values for the Probabilistic Hough Transform for line detection in the Standard scheme are listed in Table 1. The result of the detected lines by the Probabilistic Hough Transform is shown in Figure 2(b).

![Figure 2: X-ray images illustrating the detected lines of the Probabilistic Hough Transform with the assigned parameters given in Table 1](fig2.png)

(a) Enhanced X-ray image  (b) Image of detected lines

Figure 2: X-ray images illustrating the detected lines of the Probabilistic Hough Transform with the assigned parameters given in Table 1

4


A PREPRINT - FEBRUARY 21, 2019

Table 1: The detailed Probabilistic Hough Transform parameters for Standard line-based fracture detection approach, along with the reasoning for the selected values.

| Parameter          | Functionality                                                  | Assigned Value | Reasoning                                                                                                                                               |
|--------------------|----------------------------------------------------------------|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| rho, ρ             | pixel accumulator for distance resolution of line detection    | 1              | The value is assigned to 1 for fine pixel resolution for line detection.                                                                                |
| theta, θ           | angle accumulator for angle resolution in line detection       | \(\frac{\pi}{180}\)  | The angle selected allows for all line angles to be considered for line detection.                                                                       |
| threshold          | only accumulators with a value above the threshold are considered as lines | 10             | The threshold value at 10 produces lines with sufficient detailing such that the lines in the fractured region are detected, whilst still maintaining a minimal number of detected lines. |
| minimum line length| provides an acceptable minimum line length. Lines that do not meet this requirement are rejected | 25             | The chosen value assists with eliminating lines that are too short. The short lines are product of the remaining noise from the enhanced image.          |
| maximum line gap   | defines the maximum line gap between points that link the same line | 10             | The value assigned to the parameter is chosen based on the generated lines, whereby the lines generated cover all critical information within the image but does not over extend the generated lines. An increased value, generates extended lines which implies that there is existing information that is not present in the image, whereas a decreased value shortens the lines and misinterprets the image information. |

2.4 Line-based Feature Extraction

A set of 13 features are extracted from each detected line. The features are a summarised representation of the lines detected from image edge objects found in the X-ray image. These features are used as inputs into the ANN. The purpose of extracting the features is to quantify and provide crucial information about the lines to the ANN that differentiates a fractured line from a non-fractured line. The quantification of the features reduces the complexity of the ANN in both training and execution. The features are extracted based on the starting and ending points in the form of \(L(x_1, y_1, x_2, y_2)\), provided by the Probabilistic Hough Transform. These extracted features are listed and detailed in Table 2.

5

A PREPRINT - FEBRUARY 21, 2019

Table 2: The details of the extracted line features along with the feature notation and extraction methodology

| Extracted Feature | Notation | Abv. | Extraction Methodology |
|-------------------|----------|------|------------------------|
| 1 x start         | x₁       | XI   | x₁ is the x-value of the starting point |
| 2 y start         | y₁       | YI   | y₁ is the y-value of the starting point |
| 3 x end           | x₂       | X2   | x₂ is the x-value of the ending point, where x₂ > x₁ |
| 4 y end           | y₂       | Y2   | y₂ is the y-value of the ending point |
| 5 distance        | d        | DIST | The distance feature is extracted using x₁, y₁, x₂, and y₂. The distance calculation is expressed in (3). |
|                   |          |      | ![equation](d = \sqrt{(x_{2} - x_{1})^2 + (y_{2} - y_{1})^2} \tag{3}) |
| 6 gradient        | θₗ       | G    | The gradient feature is determined using x₁, y₁, x₂, and y₂. It is determined using (4). |
|                   |          |      | ![equation](θ_{l} = \tan^{-1} \left( \frac{x_{2} - x_{1}}{y_{2} - y_{1}} \right) \tag{4}) |
| 7 x-Midpoint      | xₘ       | X-MID| The x-Midpoint feature is determined using x₁ and x₂. The midpoint in the x-direction is calculated using (5). |
|                   |          |      | ![equation](x_{M} = \frac{x_{1} + x_{2}}{2} \tag{5}) |
| 8 y-Midpoint      | yₘ       | Y-MID| The y-Midpoint feature is calculated using y₁ and y₂. The midpoint in the y-direction is calculated using (6). |
|                   |          |      | ![equation](y_{M} = \frac{y_{1} + y_{2}}{2} \tag{6}) |
| 9 x-Difference    | ∆x       | X-DIFF| The x-Difference feature is determined using x₁ and x₂. It determines the difference between the x-values. |
|                   |          |      | ![equation](\Delta x = x_{2} - x_{1} \tag{7}) |
| 10 y-Difference   | ∆y       | Y-DIFF| The y-Difference feature is determined using y₁ and y₂, in which it determines the difference between the y-values. |
|                   |          |      | ![equation](\Delta y = y_{2} - y_{1} \tag{8}) |
| 11 x-distance     | dₓ       | X-DIST| This feature is derived from the Pythagoras theorem using (9), but the distance in the x-direction. |
|                   |          |      | ![equation](d_{x} = d \cos{(θ_{l})} \tag{9}) |
| 12 y-distance     | dᵧ       | Y-DIST| The y-distance feature similar to the x-distance feature, however it is given in the y-direction. The y-direction is extracted using (10). |
|                   |          |      | ![equation](d_{y} = d \sin{(θ_{l})} \tag{10}) |
| 13 gradient deviation | ∆θ    | G-DEV| The gradient deviation feature indicates the amount that the current gradient deviates from the most frequently occurred gradient, θₖᵉœₗ. The gradient deviation is obtained using (11). |
|                   |          |      | ![equation](\Delta \theta = | θ_{ref} - θ_{l} | \tag{11}) |

2.5 Feature Correlation Analysis

The Pearson product-moment correlation coefficient is used to measure the dependency between each feature extracted from 39,224 lines. The correlation coefficient, c is calculated using (12). The correlation coefficient is an indication


A PREPRINT - FEBRUARY 21, 2019

of the strength of the association between two features. It is given between a range of -1 to 1, which quantifies both strength and direction of the association between two features. The value “-1” indicates a strong negative relation. This means that as one feature increases in value, the other decreases. A “0” value shows that there is no association, and the "1" indicates a strong positive relation between two features, as either feature value increases, the other increases as well.

\[
c = \frac{cov(x, y)}{\sqrt{s^2_x \cdot s^2_y}},
\]

(12)

where \(cov(x, y)\) is the covariance of \(x\) and \(y\) and \(s^2_x\) and \(s^2_y\) are the sample variances of \(x\) and \(y\). The covariance and samples are defined as follows:

\[
cov(x, y) = \frac{\sum (x - \bar{x})(y - \bar{y})}{n-1}
\]

\[
s^2_x = \frac{\sum (x - \bar{x})^2}{n-1}
\]

\[
s^2_y = \frac{\sum (x - \bar{x})^2}{n-1}
\]

The purpose of a correlation map is to provide a visual association between each extracted line feature. The association provides an indication of the features that are dependent on one another, as well as features that are independent from all other features. The correlation map for the 13 extracted line features is illustrated in Figure 3. The correlation map indicates that the gradient deviation and x-Difference feature are less reliant on all other features and are more independent as they their relations with the other features are either weak positive or weak negative. Independent features are crucial as they have minimal redundant information. This allows for some discrepancy in the input information used to train the ANN. Redundant features contain duplicated information and as a result, they do not provide enough information to allow for the differentiation between fracture lines and non-fractured lines. The correlation map presented in Figure 3 contains a minimal amount of features that have a strong positive (light blocks) or strong negative (dark blocks) association with other features.

\[
\begin{array}{cccccccccccccc}
\text{X1} & \text{1} & \text{0.09} & \text{0.99} & \text{0.11} & \text{-0.09} & \text{-0.11} & \text{1} & \text{-0.1} & \text{0.07} & \text{0.06} & \text{0.16} & \text{0.15} & \text{0.019} \\
\text{Y1} & 0.09 & \text{1} & \text{-0.04} & \text{0.98} & \text{0.32} & \text{-0.09} & \text{-0.056} & \text{0.99} & \text{-0.12} & \text{-0.21} & \text{0.16} & \text{-0.23} & \text{0.27} \\
\text{X2} & 0.99 & -0.04 & \text{1} & \text{0.063} & \text{0.056} & \text{0.11} & \text{1} & \text{0.052} & \text{0.03} & \text{-0.062} & \text{0.11} & \text{0.074} & \text{0.034} \\
\text{Y2} & 0.11 & 0.98 & 0.063 & \text{1} & \text{0.33} & \text{0.12} & \text{-0.099} & \text{0.9} & \text{-0.1} & \text{-0.4} & \text{-0.03} & \text{-0.5} & \text{-0.84} \\
\text{X-DIFF} & -0.09 & 0.32 & 0.056 & 0.33 & \text{1} & 0.017 & -0.022 & \text{0.33} & \text{0.25} & \text{0.049} & \text{0.32} & \text{0.51} & \text{0.34} \\
\text{Y-DIFF} & -0.11 & -0.09 & 0.11 & 0.12 & 0.017 & 1 & 1 & 0.5 & 0.68 & 0.58 & 0.68 & 0.48 & 0.47 \\
\text{X-MID} & -1 & -0.08 & 1 & 0.05 & 0.022 & 0.11 & 1 & 0.77 & 0.053 & 0.13 & 0.11 & 0.07 \\
\text{Y-MID} & -0.1 & 0.99 & 0.052 & 0.99 & 0.033 & 0.015 & 0.077 & 1 & -0.11 & -0.15 & 0.23 & -0.28 & 0.24 \\
\text{DIST} & 0.007 & -0.12 & -0.062 & -0.042 & -0.049 & 0.58 & 0.058 & -0.115 & 1 & 0.68 & 0.29 & 0.67 & -0.07 \\
\text{Y-DIST} & 0.055 & -0.21 & 0.062 & -0.048 & 0.049 & 0.58 & 0.058 & -0.15 & 0.68 & 1 & 0.18 & 0.43 & 0.43 \\
\text{X-DIST} & -0.16 & 0.16 & -0.11 & 0.3 & 0.32 & 0.16 & -0.13 & 0.23 & 0.29 & 0.18 & 1 & -0.83 & -0.018 \\
\text{G} & 0.15 & -0.23 & 0.074 & -0.35 & -0.48 & 0.11 & -0.28 & 0.087 & -0.35 & 0.43 & -0.83 & 1 & 0.31 \\
\text{G-DEV} & 0.019 & 0.27 & 0.034 & 0.21 & 0.034 & -0.27 & 0.007 & 0.24 & -0.07 & 0.43 & -0.018 & 0.55 & 1 \\
\end{array}
\]

Figure 3: Correlation Map illustrating the association between each of the 13 features extracted

7


A PREPRINT - FEBRUARY 21, 2019

2.6 Principal Component Analysis

Principal Component Analysis (PCA) is a linear technique that performs dimensionality reduction through the process of embedding the data into a linear subspace of low-dimensionality. The low-dimensional representation describes the variance found within the data [12]. The purpose of utilizing PCA in this paper is to identify the dominant line features to determine the main contributing factors that distinguishes whether a line is considered fractured or non-fractured. PCA operates in such a manner that the feature with the most variation is considered a dominant feature. The variation of the features is one of the contributing factors for the classification of fractured and non-fractured lines. The variation of a feature indicates that the feature values varies for different line characteristics. PCA is applied to a number of lines, _m_, where _m_ = 39,224 for a number of features, _n_ where _n_ = 13. A matrix, _X_ with the dimensions of _m_ × _n_ is created to represent each feature of each line. The matrix is normalised to generate matrix, _X'_ in which PCA is applied to. PCA produces a _n_ × _n_ covariance matrix, _A_. The eigenvalues, _λ_ and eigenvectors, _v_ are generated using the covariance matrix. The eigenvalue, _λ<sub>i</sub>_ is a scaler which provides the magnitude of the varying values for each _i_-th feature, where _i_ ∈ {1, 2, 3, ..., _n_}. The higher the scaler value, the more variation the feature contains, whereas a lower scaler value shows that there is little to no variation within the feature. However, it is difficult to assign the appropriate eigenvalue to its associated feature as the eigenvalues are sorted from largest to smallest due to the PCA procedure. Therefore, the eigenvectors are utilized, as each element in the eigenvector is ordered in the same manner as the columns of the matrix, _X'_. Thus, the _i_-th feature is represented by element, _ɛ<sub>ij</sub>_ in eigenvector, _e<sub>j</sub>_. The determination of the contribution for each feature is entailed as follows:

1. Sum all elements in eigenvector, _e<sub>j</sub>_ to generate a vector of summed elements, _s_ = {_s<sub>1</sub>, _s<sub>2</sub>, _s<sub>3</sub>, ..., _s<sub>n</sub>_}, where _n_ is the number of eigenvectors. The calculation of _s<sub>j</sub>_ for the _j_-th eigenvector is expressed in (13).

   \[
   s_j = \sum_{i=1}^{n} \epsilon_{ij}
   \]

2. Utilizing _s_, convert each element in the eigenvectors to a ratio, _r<sub>ij</sub>_. The eigenvectors are arranged in such a way the elements match matrix, _R_ with elements _r<sub>ij</sub>_. Each element, _r<sub>ij</sub>_ is calculated using (14).

   \[
   r_{ij} = \frac{\epsilon_{ij}}{s_j}
   \]

3. The overall feature contribution, _c<sub>i</sub>_ obtained by averaging all elements in the _i_-th row of matrix, _R_. This calculation is expressed in (15). The feature contribution is associated to the _n_ extracted features from the lines.

   \[
   c_j = \frac{\sum_{j=1}^{n} r_{ij}}{n}
   \]

Figures 4, 5, and 6 illustrates the results of the PCA feature contribution. These results are crucial as it shows the indicative feature(s) that contribute most to the differentiation of a fractured and non-fractured line. Additionally, it is an indication of the feature that holds the most information about the line characteristics. Figure 4 shows the feature contribution for 39,224 extracted lines from 53 images. Figure 4 disregards the labeling of the lines. The most dominant feature in Figure 4 is gradient deviation with 76.36% contribution, followed by the gradient and x-distance feature. Therefore, despite the labelling of the lines, the gradient deviation, gradient and x-distance has the most varying values from the extracted lines. Thus, the three features holds crucial information about the line characteristics.

Figure 5 presents the feature contribution for 15,561 extracted line features that are labelled as fractures. The results show that there are three very distinct features that are dominant for fractured lines, namely, x-distance, gradient deviation and x-difference. The feature x-distance has the most varying values for fractured lines. This is valid as the orientation of fractured lines are generally positioned in a horizontal direction. Additionally, the feature x-difference is valid, because the fractured lines vary greatly in vertical length. For the x-difference feature, this indicates that the fractured lines vary greatly in length in the horizontal direction.

Figure 6 shows the three main dominant contributing features for non-fractured lines, which are x-difference, gradient deviation, and x-distance. The results indicate that the fractured and non-fractured features share two dominant features, namely gradient deviation and x-difference. This can cause confusion to the ANN in the classification of fractured and non-fractured lines, however the features differ in contribution for fractured and non-fractured lines. The results further shows that there are minor dominant features for non-fractured lines, namely, x-difference, y-distance, and gradient to assist with the differentiation between fractured and non-fractured lines.

The application of the PCA provides sufficient detailing about the contributions of each feature for both the fractured and non-fractured lines, as well as all lines in general. There are features that have minimal contribution to the line


information in which it can be eliminated to reduce the training and execution complexity of the ANN. However, with the potential of confusion between the fractured and non-fractured lines all extracted features are considered given that there are only 13 features providing crucial information about the extracted line.

![Feature contribution percentage from PCA for all lines regardless of labelling](#)

Figure 4: Histogram illustrating the results of the feature contribution from PCA for all extracted lines regardless of line classification

![Feature contribution percentage from PCA for lines labelled as fractures](#)

Figure 5: Histogram illustrating the results of the feature contribution from PCA for extracted lines labelled as fractured

9


![Feature contribution percentage from PCA for lines labelled as non-fractures](Figure%206.png)

Figure 6: Histogram illustrating the results of the feature contribution from PCA for extracted lines labelled as non-fractured

### 2.7 Neural Network Structure

The architecture of the ANN for the Standard line-based fracture detection scheme consists of four layers: one input and output layer, and two hidden layers. The number of nodes, \( n \), in the input layer is 16. There are three additional nodes compared to the number of extracted line features in the ANN input layer. The three additional nodes are for the labeling of the X-ray image regions, namely, the knee, leg and foot region. Thus, if the line belongs within the leg region, the value “1” is assigned to the associated leg feature indicator, whilst a “0” value is assigned to both knee and foot feature indicator. The assignment of the knee, leg and foot region is performed during line feature extraction. Therefore, the knee, leg and foot region assignments are considered as additional features to the extracted line features.

There are two hidden layers in the architecture of the ANN. The number of layers within the neural network defines the ANN complexity [13]. An increased number of hidden layers increases training complexity of the ANN, since it will increase the number of iterations until the desired error is obtained [14]. Furthermore, increasing the number of hidden layers does not yield a higher accuracy from the ANN. However for a single hidden layer, the ANN is over simplified and is prone to over-fitting. Therefore, increasing the difficulty of obtaining a high accuracy. This leads to the selection of having two hidden layers for the architecture of the ANN for Standard line-based fracture detection scheme. Each hidden layer has \( n - 1 \) nodes. The purpose of the additional node in the hidden layer compared to the input layer is to introduce an additional vote of input before reaching the output layer [13][15].

The output layer only has one node, the outcome of the output node is expressed as \( O_f \), where \(-1 \leq O_f \leq 1 \). The range between “-1” to “1” is defined by the labeling of the output data, whereby fractured lines are assigned to “1” as its target output and non-fractured lines are assigned to “-1”. The details of the data labelling process is discussed in Section 2.8. The final detection outcome, O classifies the input line as fracture or non-fracture with “true” or “false. Thus, \( O \in \{ \text{true}, \text{false} \} \) and is expressed in (16), where true defines a fracture and false defines a non-fracture. The ANN training and network set-up is detailed in Table 3.

\[ 
O = 
\begin{cases} 
\text{true}, & 0 \leq O_f \leq 1 \\
\text{false}, & -1 \leq O_f < 0 
\end{cases} 
\]

(16)


**A PREPRINT - FEBRUARY 21, 2019**

Table 3: The ANN training set-up for the Standard line-based fracture detection approach

| ANN Detail Set-Up | Functionality | Assigned Value |
|-------------------|--------------|----------------|
| No. of ANN epochs | The number of epochs defines the maximum number of iterations allowed during the training of the ANN. If the error of the ANN does not meet the desired error value, the network continues training until the number of iterations has reached the defined epochs value | 50,000 epochs. |
| Desired Error | The desired error value is the minimal error allowed for the ANN during the training, as weights cannot perfectly match the input to output value, whilst still maintaining generality over large data sets. | 0.0001 |
| Training Data Order | The data given to the ANN for training is potentially ordered. An ordered training data set can swing the ANN weights from one decision to another. Thus, the training data is shuffled such that there is no favouritism given over a selected set of data. | “shuffled” |

![Diagram](./image.png)

Figure 7: Diagram showing the artificial neural network architecture for Standard line-based fracture detection scheme, where μ is indicative of the hidden layers.


A PREPRINT - FEBRUARY 21, 2019

2.8 Data Line Labelling

The data labelling is performed using a graphical user interface (GUI). The data is labelled visually through the GUI by a user. The extracted lines from the Probabilistic Hough Transform is drawn onto the enhanced image of the original X-ray image, shown in Figure 8. Before the lines are labelled, further processing is performed to isolate the lines within the knee and foot region from the lines in the leg region. Thus, the labelling process is restricted to the lines in the leg region.

![Figure 8](image-url)

Figure 8: Images illustrating the labelling of the detected lines

The labelling process is performed manually by a human professional, whereby the user selects the region of the fracture. The lines in the selected region are labelled as fractures while the remaining lines are labelled as non-fractures. The regional labelling approach is chosen, as it mimics the visual detection approach that a medical professional utilises. This approach is chosen over the labelling of individual lines, as it is far too time-consuming and impractical. The impracticality of labelling individual lines stems from the visual information that a single line provides. A single line provides little to no evidence of whether it is fractured or non-fractured. Whereas, a group of lines provides more context about the line classification. The regional data labelling approach provides adequate information about the lines based on its location and neighbouring lines. A line is considered a fracture if either its starting or ending point is within the selected area. However, this approach is not perfect, as it mislabels lines that are non-fractures but fall within the selected region as fractures.

3 Results of the Standard Line-Based Fracture Detection

3.1 Artificial Neural Network Experimental Set-Up

The ANN is evaluated based on its performance to make accurate fracture and non-fracture classification. The set-up of the evaluation consists of both system and ANN evaluation. For the system evaluation, a total of 20 images are used to evaluate the system. There are 20 individual image cases for the system evaluation. Each case trains the ANN with a number of images ranging from 1 to 20. This evaluation provides the ANN with lines that has context about the image it is extracted from. The images, *i*, are randomly selected from a set of training images, *n*. Hence, *i* ∈ {1, 2, 3, ..., *n*}, where *n* = 29. There are an average of 740 lines per image, and the average ratio of fractures to non-fractures is 1 : 1.52. Each case has 10 simulations. This is to obtain an average accuracy for the system as each simulation accuracy

12

A PREPRINT - FEBRUARY 21, 2019

outcome differs slightly from one another. The slight differences are a result of the randomly initialised weights in the ANN as well as the randomly selected images used for each training case. 23 images are used to test the system for each case to ensure that each case and simulation is evaluated fairly.

3.2 System and Artificial Neural Network Results

The results of the system evaluation is presented in Table 4, whereby the minimum, average and maximum accuracies for each case is detailed. The system was evaluated using a total of 11,910 lines that are extracted from 23 images. From the 11,910 lines, 4,707 lines are fractured and 7,203 are non-fractured lines.

Table 4: The results for the system’s minimum, average and maximum accuracy of the system for 20 cases over 10 simulations for the Standard line-based fracture detection scheme

| No. Trained Images, \(c_i\) | Min Accuracy (%) | Average Accuracy (%) | Max Accuracy (%) |
|-----------------------------|------------------|----------------------|------------------|
| 1                           | 68.606           | 72.764               | 75.777           |
| 2                           | 60.462           | 69.9842              | 75.206           |
| 3                           | 60.831           | 71.0134              | 75.113           |
| 4                           | 66.255           | 71.8111              | 75.718           |
| 5                           | 60.336           | 70.1906              | 75.407           |
| 6                           | 66.314           | 72.1956              | 75.466           |
| 7                           | 69.639           | 72.2939              | 75.743           |
| 8                           | 60.571           | 71.3233              | 75.919           |
| 9                           | 67.674           | 71.7062              | 75.743           |
| 10                          | 68.585           | 72.7254              | 75.449           |
| 11                          | 67.674           | 72.5499              | 75.76            |
| 12                          | 67.599           | 71.5242              | 75.332           |
| 13                          | 69.018           | 72.4467              | 74.845           |
| 14                          | 72.704           | 74.2135              | 75.651           |
| 15                          | 60.579           | 69.7364              | 75.136           |
| 16                          | 60.487           | 70.0982              | 74.433           |
| 17                          | 67.389           | 72.6766              | 75.306           |
| 18                          | 61.226           | 69.519               | 75.928           |
| 19                          | 60.437           | 68.9798              | 75.55            |
| 20                          | 70.848           | 73.7094              | 75.197           |

The ROC curve is constructed using the sensitivity and specificity results from the binary classification system. There are four variables that are considered for the sensitivity and specificity, namely, true positive, false negative, false positive and true negative. Both false negative and false positive are miss-classifications of the lines and have detrimental consequences within the medical field. However, a false negative is far more severe than a false positive, as it implies that a fracture has been missed and can potentially be untreated leading to dire consequences. The calculation for both sensitivity and specificity are expressed in [17] and [18] respectively. The receiver operating characteristic (ROC) curve is a tool commonly utilised for performance evaluation for binary classification systems [16]. The ROC curve for the image evaluation is illustrated in Figure 10. The ROC curve is determined by employing curve-fitting on the measured results. The area under the curve (AUC) for the presented ROC graph is 0.8149. An ideal AUC has a value of 1. Therefore, the system has a favourable true positive sensitivity detection.

\[
\text{sensitivity} = \frac{\text{TP}}{\text{TP} + \text{FN}}
\]

\[
\text{specificity} = \frac{\text{TP}}{\text{FP} + \text{TN}}
\]

For the ANN evaluation, each case is made up of a number of lines that is used to train the ANN to evaluate its performance. The lines are grouped into two categories, fractures and non-fractures. The evaluation is set-up such that there is an equal number of fractured and non-fractured lines for each case. Thus 50% of lines are fractured and 50% of lines are non-fractured. Each case consists of a number of both fractured and non-fractured lines in groups of 5’s. The total number of lines used for training is 1,500 lines. Consequently there are a total of 150 cases. The performance of the ANN is evaluated in the same manner as the system evaluation, whereby a fixed number of lines is used for testing the accuracy of the ANN. A total of 13,178 lines are used to test each case, whereby 5,162 are labelled as fractured lines and 8,016 are non-fractured lines. The result of the accuracy for each case is illustrated in Figure 11.

13


A PREPRINT - FEBRUARY 21, 2019

Graph showing the average accuracy results for the Standard line-based fracture detection scheme

![Graph showing accuracy results](attachment:image.png)

Figure 9: Graph illustrating the average accuracy for 20 cases over 10 simulations for the Standard line-based fracture detection scheme

Table 4 shows that despite the number of images trained, it does not affect the accuracy of the ANN as the accuracy of the system ranges between 65.37% to 75.44%. This indicates that a single image provides the ANN with enough line training data to achieve an average of 71.5% accuracy. Figure 11 illustrates that accuracy of the ANN is between 67% to 72% after the exposure of 40 lines. Therefore, the minimum number of lines needed to achieve an accuracy between 67% to 72% are 20 fractured and 20 non-fractured lines. An increase in the number of lines exposed to the ANN, does not result in any drastic improvements regarding the detection accuracy.

14


A PREPRINT - FEBRUARY 21, 2019

![ROC curve illustrating the TPR and FPR for the Standard line-based fracture detection for image evaluation](#)

Figure 10: Figure illustrating ROC curve for the Standard line-based fracture detection

Graph illustrating the performance of the ANN for the Standard line-based fracture detection scheme

![Graph illustrating the performance of the ANN whilst training it with an equal number of fractured and non-fractured lines for each case for the Standard line-based fracture detection scheme](#)

Figure 11: Graph illustrating the performance of the ANN whilst training it with an equal number of fractured and non-fractured lines for each case for the Standard line-based fracture detection scheme

15


A PREPRINT - FEBRUARY 21, 2019

4 Adaptive Differential Parameter Optimized Line-Based Fracture Detection

For the Standard line-based fracture detection scheme, the parameters of the Probabilistic Hough Transform is not optimized for line detection. The purpose of the Adaptive Differential Parameter Optimized (ADPO) line-based fracture detection scheme is to optimize the parameters, such that the generated lines can accurately represent the image edge objects found in the X-ray image. This includes generating granule lines that details the fractures in the fractured region. There are three major parameters that are optimized: threshold, minimum line length and maximum line gap parameters. The ADPO line-based fracture detection scheme follows the same procedure as the Standard scheme. The difference is that the ADPO introduces a parameter optimizing process and a filtering technique to separate surrounding flesh lines from the leg-bone lines in the leg region. The architecture and training of the ANN remains the same as the Standard scheme. Additionally, the evaluation for both system and ANN remains the same.

4.1 Adaptive Differential Parameter Optimization

1. The threshold parameter controls the number of point intersections, such that \((r_0, \theta)\) coordinates are considered as lines. An increased threshold value defines fewer lines with less minor details about the image edge objects, whereas a decreased threshold parameter value captures all details about the image. This is illustrated in Figure 12. Therefore, the threshold parameter value is set to 1. Although the detected lines in Figure 12(a) are scattered compared to the lines in Figure 12(b) the lines are reconstructed at a later stage when all other parameters are optimized.

![Threshold value 1](image-a)
![Threshold value 50](image-b)

Figure 12: Images illustrating the generated line difference between a minimal and increased threshold parameter value

2. The minimum line length, \(l_{min}\) parameter controls the accepted length of the detected line. An increased \(l_{min}\) eliminates lines that are considered as noise, however it disregards detailed lines that are found in the fractured region. This is depicted in Figure 13 where Figure 13(a) shows more detailed lines, particularly within the fractured region compared to Figure 13(b) whereas in Figure 13(b) the outline of the fracture is barely visible from the generated lines. Although a minimal value assigned to \(l_{min}\) may be ideal, but the generated lines contains redundant information, as a number of short segmented lines can be represented by a single line instead. Additionally, the shorter lines distorts the most frequently occurring gradient within the leg region and therefore effects the gradient deviation feature.

16


![Images](https://via.placeholder.com/150)

Figure 13: Images illustrating the generated line difference between a minimal and increased value assigned to the minimum line length parameter

The optimized minimum line length, \( l'_{\min} \), is determined by obtaining the gradients of each line, \( L \), detected in the image for a particular \( l_{\min} \), where \( 1 \le l_{\min} \le 25 \). Thus there are a total of 25 images generated for each minimum line length ranging from 1 to 25. The gradients of each line within each image is used to calculate the average gradient, \( \bar{\theta}_{\min} \), to represent the general direction of the lines in the image. The determination of \( \bar{\theta}_{\min} \) is expressed in (19). The average gradients are evaluated to determine the maximum difference between adjacent average gradients. This evaluation is performed by finding the difference between each adjacent average gradient, which is expressed in (20). The \( l'_{\min} \) associated to the maximum difference between the average gradients, \( \Delta\bar{\theta}_{\min} \) is the optimized minimum line length. This is because the gradients of the fractured lines are in a more horizontal position between 0° and 45°, compared to non-fractured lines which are generally in placed in a vertical position. Therefore, the fractured lines have a lower gradient value than non-fractured lines and the largest average difference is associated with \( l'_{\min} \). The calculation is expressed in (21).

\[
\bar{\theta}_{\min} = \frac{\sum_{k=1}^{m} \theta_{L_k}}{m}
\]
(19)

where, m is the total number of detected lines in the image and \( L_k \) is the k-th line.

\[
\Delta\bar{\theta}_{\min} = \bar{\theta}_{\min} - \bar{\theta}_{\min-1},
\]
(20)

\[
l'_{\min} = \arg\max(\Delta\bar{\theta}_{\min})
\]
(21)

However the lines, \( L_{l'_{\min}} \), generated from the optimized minimum line length does not contain all the detailed lines in the fractured region. Thus, lines generated by prior minimum line lengths from the optimized minimum line length are borrowed to fill in the missing detailed fractured lines. A conditional statement is employed such that the borrowed minimum line length will never be less than the value “1”. The prior minimum line lengths are specifically, \( l'_{\min} - 1\) and \( l'_{\min} - 2\). Any further prior lines that are considered are redundant as it shares the same lines with \( l'_{\min} + 1 \) and \( l'_{\min} - 2 \). The considered lines, \( L \) are as described in (22).

\[
L = \left[L_{l'_{\min}}, \, L_{l'_{\min-1}}, \, L_{l'_{\min-2}}\right]
\]
(22)


where \( L \) is a vector of lines, \( L(x_1, y_1, x_2, y_2) \).

There are repeated lines from the three selected sets of line vectors: \( L_{l_p,...} \), \( L_{r_p,...} \), and \( L_{y_p,...} \). Only the unique lines are exacted and considered. Thus, the final lines considered, \( L_f \) are expressed in (23)

\[
L_f(L) = \text{unique}\{L_i\}_{i \in \{1,2,3,...,n\}}
\]

(23)

3. The maximum line gap, \( L_{g_{max}} \) parameter controls the gap between the ending points of each line segment. If the distance between the line segments’ ending points do not meet the allowed maximum line gap, the segments are combined to create a single line. A decreased maximum line gap generates lines that does not describe the image edge objects in the fractured region, despite the optimized minimum line length value. The results are shown in Figure 14(a). An increased maximum line gap generates lines that misrepresents the image edge object, as it over extends the lines. The result of an increased maximum line gap value is shown in Figure 14(b) The selected value for the maximum line gap is 13. The value is chosen based on the evaluation of the number of lines generated for each maximum line gap value ranging between 10 and 20. The maximum line gap value of 13 is chosen as it generates a sufficient number of lines that details the crucial information for 50 images used for testing.

![Figure: Comparison of line gaps](image)

**Figure 14: Images illustrating the generate line difference between a minimal and increased value assigned to the maximum line gap parameter**

4.2 Lines of Interest in the Leg Region

Through visual analysis of lines generated from the X-ray images, the detected lines includes both the lines of the bones and of the surrounding flesh (outer leg) as illustrated in Figure 15(a). The fractured lines are only situated in the leg-bone region. Therefore, the focus of the fracture detection only concerns the lines within the leg-bone region. Consequently, the surrounding flesh lines are eliminated to reduce the number of lines used for training the ANN. The elimination of the flesh lines is performed through the process of analysing the x-values of each line point. The x-values are chosen for the analysis for two reasons. The first is to isolate the lines in the leg-bone region from the surrounding flesh lines by creating vertical slices of the image. The second reason is due to the pattern discovered with the x-values regarding its difference in density for lines in the flesh and leg-bone region. The leg-bone has a higher x-value density compared to the flesh lines, as there are more detected lines in the leg-bone region. This pattern holds true for all X-ray images used for this research.

18


![Image](attachment:image.png)

Figure 15: Images illustrating the before and after of applying the sliding window to isolate the surrounding flesh lines from the leg-bone lines in the leg region

In order to focus on the lines in leg-bone region, the lower and upper bounds are determined using the extracted x-values from the lines. Therefore, x1 and x2 are extracted from each line, L(x1, y1, x2, y2). A frequency vector, f, for all unique x-values is created. The frequency vector holds the total number of occurrences for each unique x-value in the form of (x, f), where x is the unique x-value and f is the number of occurrences for the particular x-value. The x-values of f, f_x, are analysed by employing a sliding window, w, that traverses through each x-value of the image width, w, to find matching values in f_x. The window size, l_w, of the sliding window is 5% of the image width, w. The 5% value is selected based on the number of detailed points obtained from the windowing procedure, which is through trial-and-error. An increase in the window size gives leeway for the lower bound value, however the upper bound value is shortened and does not achieve the desired x-value. Thus, by increasing the window size, the ROI is shifted.

The sliding window is bounded by two variables, the starting window value, w_s, and the ending window value, w_e. The two variables vary in value as the sliding window traverses through the width of the image, whilst maintaining a fixed length defined by l_w. If a match between the i-th x-value within the sliding window (w_s ≤ i ≤ w_e) with the j-th x-value in f_x, then frequency, f_j is summed to obtain the window total frequency, f(w) for the i-th width x-value. The purpose for obtaining f(i) for each i-th x-value is to find the region with the highest x-value density to determine the lower and upper bounds of the leg-bone region. The described algorithm is presented in Algorithm 1 and the result of the density algorithm for Figure 15(a) is illustrated in Figure 16.

In Figure 16 the region with the highest peak is indicative of the highest x-value density within the image. The lower and upper bounds of the region is determined by observing the turning points of the graph in Figure 16. The result of applying the lower and upper bounds is presented in Figure 15(b).

4.3  Optimized Line-Based Detection Results

The results of the APPO line-based fracture detection scheme are obtained from the same experimental set-up described in Section 3.1. However, the difference is the data used for both training and testing the ANN. The ANN is only trained with lines that are found within the leg-bone region. The elimination of the surrounding flesh lines reduces the training complexity and of the ANN. Therefore, the evaluation of the ANN is focused on classifying fractured lines from non-fractured lines found only in the leg-bone region, whilst all other lines are evaluated by other components.


A PREPRINT - FEBRUARY 21, 2019

---

Algorithm 1: Obtaining x-Value-Density of x-values Extracted from Lines Algorithm  
Data: x-values, x₁ and x₂ from each detected line  
Result: csv file with summed frequency values at each i-th value within the X-ray image  
Create csv file;  
Obtain frequency vector fᵢ for each unique x-value through frequency analysis;  
Initialise sliding window size, lₕᵥ, to 5% of image width, wᵢ;  
for i = 0, j < wᵢ, i + d₀  
  Window start, wₛ = i;  
  Window end, wₑ = i + lₕᵥ;  
  Window frequency, fᵢ⁽⁰⁾ = 0;  
  for j = 0, j < l fⱼ, j + + do  
    if wₛ ≤ l fⱼ⁽⁰⁾ ≤ wₑ then  
      fᵢ⁽⁰⁾ = fᵢ⁽⁰⁾ + fⱼ;  
    end  
  end  
  record the total frequency within the current window, fᵢ⁽⁰⁾ along with the associated i-th value in the csv file;  
end  
return csv file ;  

![Graph illustrating the sum of frequencies for x-values found at for each window frame](image_chart.png)

Figure 16: Graph showing the results of the windowing technique to Figure 15(a)

In the system. This means that the lines found within the knee, foot and flesh regions are automatically classified as non-fractured lines. A total of 16,515 lines extracted from 23 images are employed to evaluate the ADPO scheme. Of the 16,515 lines, 8,035 are fractured lines and 8,480 are non-fractured lines.  

The image evaluation accuracy results for the ADPO line-based fracture detection scheme is presented in Table 5. The average number of lines per image used for the ADPO scheme is 849 lines per image. The accuracy of the system

---

20

ranges from 63.61% to 80.88%. Thus yielding an average accuracy of 72.89%, which is a slight improvement from the average accuracy obtained from the Standard scheme, which is 71.57%. Figure 19 illustrates the performance of the ANN. A total of 11,195 lines are used to test each case for the ANN, whilst 8,035 lines are fractured and 3,160 are non-fractured. The results shows that the accuracy of the ANN requires a minimum of 300 lines to obtain a 65% accuracy. The accuracy achieved for the ANN evaluation is less than the accuracy of the Standard scheme, which obtained a maximum accuracy of 72%. However, the ANN of the ADPO scheme focuses only on the lines in leg-bone region, whereas the ANN of the Standard scheme is exposed to all lines detected in the X-ray image.

Table 5: The results for the system’s minimum, average and maximum accuracies for 20 cases over 10 simulations for the ADPO line-based fracture detection scheme.

| No. Trained Images | Min Accuracy (%) | Average Accuracy (%) | Max Accuracy (%) |
|--------------------|------------------|----------------------|------------------|
| 1                  | 65.129           | 73.8656              | 80.866           |
| 2                  | 63.294           | 74.7085              | 82.894           |
| 3                  | 62.246           | 72.0613              | 81.732           |
| 4                  | 63.53            | 72.3312              | 80.751           |
| 5                  | 61.629           | 74.2942              | 81.483           |
| 6                  | 61.32            | 70.5336              | 80.715           |
| 7                  | 65.389           | 74.9762              | 81.163           |
| 8                  | 63.76            | 70.1379              | 81.999           |
| 9                  | 65.722           | 75.3762              | 81.417           |
| 10                 | 62.168           | 70.9889              | 80.648           |
| 11                 | 62.313           | 71.7632              | 81.217           |
| 12                 | 61.508           | 72.1551              | 80.587           |
| 13                 | 65.752           | 74.2622              | 82.955           |
| 14                 | 64.087           | 71.1565              | 78.401           |
| 15                 | 59.891           | 72.1785              | 80.793           |
| 16                 | 65.934           | 71.1875              | 77.312           |
| 17                 | 60.539           | 73.1501              | 81.532           |
| 18                 | 68.314           | 75.1457              | 81.695           |
| 19                 | 64.693           | 72.3942              | 80.339           |
| 20                 | 65.05            | 74.5831              | 80.793           |

21


A PREPRINT - FEBRUARY 21, 2019

Graph showing the average accuracy results for the ADPO line-based fracture detection scheme

![Graph showing average accuracy results](image-url)

No. Image Trained

Figure 17: Graph illustrating the average accuracy for 20 cases over 10 simulations for the improved ADPO line-based fracture detection scheme

The ROC curve for the system evaluation is presented in Figure 18. There are three distinct ROC results illustrated: measured results, estimated ROC, and ROC reference. The measured results are obtained from each case used to evaluate the system. Since the measured results are scattered, a ROC approximation using the measured results is constructed. The estimated ROC curve is employed for the calculation of the AUC, in which the AUC has a value of 0.8271. The ROC reference provides further context of the system's performance relative to a system that randomises binary classification. The AUC value obtained shows that there is a slight improvement from the Standard scheme, where the AUC value is 0.8149. Therefore, the ADPO scheme is more sensitive in detecting true positives than the Standard scheme.

22


![ROC curve illustrating the TPR and FPR for the ADPO line-based fracture detection for system evaluation](figure18.png)

Figure 18: Figure illustrating ROC curve for the ADPO line-based fracture detection

Graph illustrating the performance of the ANN for the ADPO line-based fracture detection scheme

![Graph showing the system's minimum, average and maximum accuracies of the ADPO line-based fracture detection scheme](figure19.png)

Figure 19: Graph showing the system's minimum, average and maximum accuracies of the ADPO line-based fracture detection scheme

23


A PREPRINT - FEBRUARY 21, 2019

5 Critical Analysis

The performance of the ANN is evaluated based on its ability to accurately classify fractured and non-fractured lines. There are four variables that are employed to evaluate the results of both the ANN and the entirety of the system: true positive, true negative, false positive and false negative.

In the medical field, false positives are tolerated, as it is indicative of a cautious system. However, false negatives cannot be tolerated as it means that a fracture is being detected as normal. It is difficult to avoid false negatives when working with ANN's due to its purpose for forming a generalised operation for all input data. Therefore, the number of false negatives must be as minimal as possible. The accuracy, 𝑎, for the evaluation of both the ANN and the system is expressed in (24).

\[ a = \frac{\text{TP} + \text{TN}}{\text{TP} + \text{TN} + \text{FP} + \text{FN}} \]

(24)

Further evaluation of the ROC curves for both Standard and ADPO schemes in Figure 20; the ROC curve of the ADPO scheme increases in TPR at a lower FPR value compared to the ROC curve of the Standard scheme. The ROC graph of Figure 10 indicates that the scheme reaches maximum sensitivity at 0.4 FPR for the measured results, whilst in Figure 18 the maximum sensitivity is reached at 0.37 FPR. This indicates that the sensitivity performance of the ADPO scheme is slightly better than the Standard scheme.

![ROC Curve](image-link)

Figure 20: ROC curves for both the Standard and ADPO line-based fracture detection scheme

Although, the ADPO scheme has a better sensitivity and accuracy performance compared to the Standard scheme, the system’s maximum achievable accuracy is 82.9%, which can be further improved. However, the accuracy of the described schemes are hindered by the labelling of the lines. The approach utilised for the labelling of the fractured and non-fractured lines is an area selection approach, whereby the lines that are within the selected area are labelled as fractures. Lines that are not considered as fractures by human visualisation but are within the selected area are mislabelled. This affects the ANN performance as the weights in the ANN are adjusted due to the mislabelled lines. However, the affect on the weights is minimal as there is only a minority of mislabelled lines. Additionally, the number of features extracted from the lines is limited, because only two points are provided by the Probabilistic Hough

24


Transform to describe the line detected from the image edge objects of the X-ray image. Moreover, the line detection within the X-ray image is only an approximation of the image edge objects in the X-ray image. An improved detection methodology built from the foundations of the line-based fracture detection scheme, whereby contours are utilised rather for feature extraction instead of lines.

## 6  Future Improvements

Future improvements can be implemented to the labelling process of fractured and non-fractured lines, as the current labelling process utilises an area selection approach which mislabels non-fractured lines as fractured lines when the lines are in the area of selection. The improvement to the labelling process includes a deselection process. Thus allowing the user to deselect individual lines from the selected group of fractured lines. This improvement incorporates both area selection and individual deselection. Other improvements is the use of contours over lines, as the detected lines are limited in the number of features that are extracted. Additionally, the lines are an approximation of the edge image objects, whereas contours are a more detailed representation of the edge image objects and holds more points, which result in additional features that can be extracted.

## 7  Conclusion

To conclude, this paper details two line-based fracture detection schemes, Standard and ADPO. Both line-based fracture detection schemes utilises 13 extracted features from the detected lines. The difference is that the ADPO scheme optimises the parameters in the Probabilistic Hough Transform for line detection. The optimisation detects more detailed lines for the fractured region within the X-ray image compared to the Standard scheme. Additionally, the ADPO scheme employs a technique which isolates the bones within the leg region from the surrounding lines of the flesh. Therefore, the ANN is only trained with lines within the leg-bone regions. Thus, shifting the focus of the ANN to detect fractures within the leg-bone area only. The system eliminates all other detected lines, which are automatically classified as non-fractures. This includes lines within the knee, foot and surrounding flesh region. In focusing the ANN for lines only in the leg-bone region, it reduces the training complexity of the ANN. The accuracy of the ADPO scheme is slightly better than the accuracy of the Standard scheme. The average accuracy of the ADPO system is 72.89%, whilst the average accuracy of the Standard scheme is 71.57%.

The ANN evaluation without image context indicates that the Standard scheme performs better than the ADPO scheme, however the ADPO ANN only focuses on the lines found within the leg-bone region, whereas the Standard scheme’s ANN is given all detected lines for training. Therefore, the accuracy evaluation will be higher for the Standard scheme as there is a larger number of classified true negatives in the accuracy calculation compared to the ADPO scheme. Further analysis is performed on both schemes to evaluate the ratio of false positive to false negative detection. The ADPO scheme has a higher false negative detection compared to the Standard scheme, but the sensitivity of the ADPO scheme is better than the sensitivity of the Standard scheme. This is determined by employing ROC curves and the calculation of the AUC. The AUC of the Standard scheme is 0.8149, whilst the AUC of the ADPO scheme is 0.8271. Therefore, between the two line-based fracture detection schemes, the ADPO scheme is preferred over the Standard scheme.

The limitation of both schemes lies within the detection of the lines, where the detected lines are an approximation of the image edge objects in the X-ray image. Additionally, the two points provided to describe the lines limits the number of features that are extracted for fracture detection. Due to the limitations of line detection and extracted features an alternative approach is considered. The alternative approach employs the use of contours over the use of lines for feature extraction.

## Acknowledgements

Acknowledgements are extended to the Department of Radiology at No. 85 Hospital, Shanghai, China for the re-usage of the provided X-ray images.

## References

[1] B. Potter and M. C. Potter, “Method and apparatus for automated medical diagnosis using decision tree analysis,” mar 1988, uS Patent 4,733,354.

25


[2] N. Nahar and F. Ara, “Liver Disease Prediction by Using Different Decision Tree Techniques,” International Journal of Data Mining & Knowledge Management Process, vol. 8, no. 2, pp. 01–09, Mar. 2018. [Online]. Available: http://airccjounie.com/ijdkp/V8N2/8218ijdkp01.pdf [Accessed: 2019-02-19]

[3] M. Syiam, M. El-Aziem, and M. Soliman, “Adagen: adaptive interface agent for x-ray fracture detection,” in International Conference on Electrical, Electronic and Computer Engineering, 2004. ICEEC ’04. Cairo, Egypt: IEEE, 2004, pp. 354–357. [Online]. Available: http://ieeexplore.ieee.org/document/1374466/ [Accessed: 2019-01-21]

[4] S. Mahendran and S. S. Baboo, “Automatic fracture detection using classifiers- a review,” IJCSI Int. Journal of Computer Science, vol. 8, no. 1, pp. 340–345, Nov 2011.

[5] ——, “An enhanced tibia fracture detection tool using image processing and classification fusion techniques in x-ray images,” Global Journal of Computer Science and Technology, vol. 11, no. 14, pp. 22–28, 2011.

[6] A. Doğantekin, F. Özyurt, E. Avcı, and M. Koç, “A novel approach for liver image classification: PH-C-ELM,” Measurement, vol. 137, pp. 332 – 338, 2019. [Online]. Available: http://www.sciencedirect.com/science/article/ pii/S0263224119300697

[7] W. Hou, J. Wei, Y. Jin, and C. Zhu, “Deep features based on a DCNN model for classifying imbalanced weld flaw types,” Measurement, vol. 131, pp. 482 – 489, 2019. [Online]. Available: http://www.sciencedirect.com/science/article/pii/S026322411830839X

[8] C. Xing, H. Xu, Y. Tan, X. Liu, C. Zhou, and T. Scarpa, “Gradation measurement of asphalt mixture by X-Ray CT images and digital image processing methods,” Measurement, vol. 132, pp. 377 – 386, 2019. [Online]. Available: http://www.sciencedirect.com/science/article/pii/S026322411830900X

[9] “OpenCV: Canny Edge Detection,” Dec 2015. [Online]. Available: https://docs.opencv.org/3.1.0/d4/d86/tutorial_ py_canny.html [Accessed: 2019-02-19]

[10] R. S. Stephens, “Probabilistic approach to the Hough transform,” Image and vision computing, vol. 9, no. 1, pp. 66–71, 1991.

[11] G. C. H. C., “Which hough transform?” CVGIP: Image understanding, vol. 58, no. 2, pp. 250–264, 1993.

[12] I. T. Jolliffe, J. Cadima, and J. Cadima, “Principal component analysis: a review and recent developments,” Philosophical Transactions of the Royal Society A, vol. 374, no. 2065, p. 20150202, 2016.

[13] K. Hornik, “Approximation capabilities of multilayer feedforward networks,” Neural networks, vol. 4, no. 2, pp. 251–257, 1991.

[14] G. Cybenko, “Approximation by superpositions of a sigmoidal function,” Mathematics of control, signals and systems, vol. 2, no. 4, pp. 303–314, 1989.

[15] G. E. Hinton, S. Osindero, and Y.-W. Teh, “A fast learning algorithm for deep belief nets,” Neural computation, vol. 18, no. 7, pp. 1527–1554, 2006.

[16] S. Narkhede, “Understanding AUC - ROC Curve,” Jun. 2018. [Online]. Available: https://towardsdatascience. com/understanding-auc-roc-curve-68b2303cc9c5 [Accessed: 2019-01-26]
